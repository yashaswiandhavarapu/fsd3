const express = require('express');
const session = require('express-session');
const app = express(); // Create express app
app.use(express.urlencoded({ extended: true })); // To read form data
// Use session middleware
app.use(session({
secret: 'secret123', // Secret key to sign the cookie
resave: false,
saveUninitialized: true
}));
// Show login form or welcome message
app.get('/', (req, res) => {
if (req.session.username) {
// If user is logged in, show welcome message
res.send(`
Welcome ${req.session.username}!<br>
<a href="/logout">Logout</a>
`);
} else {
// If not logged in, show login form
res.send(`
<h2>Login</h2>
<form method="POST" action="/login">
<input name="username" placeholder="Username" required><br>
<input name="password" type="password" placeholder="Password" required><br>
<button type="submit">Login</button>
</form>
`);
}
});
// Handle login
app.post('/login', (req, res) => {
const { username, password } = req.body;
// Check credentials (hardcoded)
if (username === 'rekha' && password === '1234') {
req.session.username = username; // Save user in session
res.redirect('/');
} else {
res.send('Invalid credentials. <a href="/">Try again</a>');
}
});
// Handle logout
app.get('/logout', (req, res) => {
req.session.destroy(() => { // Destroy session
res.redirect('/'); // Go back to login page
});
});
// Start server
app.listen(3000, () => {
